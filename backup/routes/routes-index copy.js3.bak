import React from 'react'
import { createBrowserRouter, Navigate } from 'react-router-dom'
import MainLayout from '../layouts/MainLayout.jsx'
import Login from '../pages/Login.jsx'
import Dashboard from '../pages/Dashboard.jsx'
import Invoice from '../pages/Invoice.jsx'
import Quote from '../pages/Quote.jsx'
import Receipt from '../pages/Receipt.jsx'
import InvoiceForm from '../pages/InvoiceForm.jsx'
import QuoteForm from '../pages/QuoteForm.jsx'
import ReceiptForm from '../pages/ReceiptForm.jsx'
import InvoicePrintPreview from '../pages/InvoicePrintPreview.jsx'
import ErrorPage from '../pages/ErrorPage.jsx'
import ProtectedRoute from './ProtectedRoute.jsx'

const router = createBrowserRouter([
  { 
    path: '/login', 
    element: <Login />,
    errorElement: <ErrorPage />
  },
  { 
    path: '/', 
    element: <Navigate to="/dashboard" replace />,
    errorElement: <ErrorPage />
  },
  {
    element: <MainLayout />,
    errorElement: <ErrorPage />,
    children: [
      { 
        path: '/dashboard', 
        element: (
          <ProtectedRoute>
            <Dashboard />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/invoices', 
        element: (
          <ProtectedRoute>
            <Invoice />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/invoices/new', 
        element: (
          <ProtectedRoute>
            <InvoiceForm />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/invoices/:id/edit', 
        element: (
          <ProtectedRoute>
            <InvoiceForm />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/quotes', 
        element: (
          <ProtectedRoute>
            <Quote />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/quotes/new', 
        element: (
          <ProtectedRoute>
            <QuoteForm />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/quotes/:id/edit', 
        element: (
          <ProtectedRoute>
            <QuoteForm />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/receipts', 
        element: (
          <ProtectedRoute>
            <Receipt />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/receipts/new', 
        element: (
          <ProtectedRoute>
            <ReceiptForm />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/receipts/:id/edit', 
        element: (
          <ProtectedRoute>
            <ReceiptForm />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      { 
        path: '/invoice-print', 
        element: (
          <ProtectedRoute>
            <InvoicePrintPreview />
          </ProtectedRoute>
        ),
        errorElement: <ErrorPage />
      },
      // Catch-all route for 404 errors
      {
        path: '*',
        element: <ErrorPage />,
        errorElement: <ErrorPage />
      }
    ],
  },
])

export default router
